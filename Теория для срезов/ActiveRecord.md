–û—Ç–ª–∏—á–Ω–æ, –∏–¥—ë–º –ø–æ –ø–æ—Ä—è–¥–∫—É üí™  
–†–∞–∑–±–µ—Ä—ë–º –ø–∞—Ç—Ç–µ—Ä–Ω **Active Record** ‚Äî –æ–Ω —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è —Ä—è–¥–æ–º —Å Repository –∏ Unit of Work, –Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è —Ñ–∏–ª–æ—Å–æ—Ñ–∏–µ–π.

---

## üí° –ß—Ç–æ —Ç–∞–∫–æ–µ Active Record

> **Active Record** ‚Äî —ç—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –∫–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç –º–æ–¥–µ–ª–∏ **—Å–∞–º –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫—É —Å–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±–∞–∑—ã**.

–¢–æ –µ—Å—Ç—å ‚Äî **–º–æ–¥–µ–ª—å = –∏ –¥–∞–Ω–Ω—ã–µ, –∏ –ª–æ–≥–∏–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î**.  
–ù–∏–∫–∞–∫–∏—Ö –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –Ω–µ –Ω—É–∂–Ω–æ.

---

## üéØ –¶–µ–ª—å –ø–∞—Ç—Ç–µ—Ä–Ω–∞

‚úÖ –£–ø—Ä–æ—Å—Ç–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å –¥–∞–Ω–Ω—ã–º–∏ ‚Äî –≤—Å—ë –≤ –æ–¥–Ω–æ–º –∫–ª–∞—Å—Å–µ.  
‚úÖ –ò–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è CRUD-–∫–æ–¥–∞ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö.  
‚úÖ –°–¥–µ–ª–∞—Ç—å –∫–æ–¥ –±–ª–∏–∂–µ –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É –æ–±—ä–µ–∫—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `User.Save()` –∑–≤—É—á–∏—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ).

---

## üß© –ö–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç

```csharp
public class Product
{
    // === –î–ê–ù–ù–´–ï ===
    public int Id { get; set; }
    public string Name { get; set; } = "";
    public decimal Price { get; set; }

    // === –õ–û–ì–ò–ö–ê –î–û–°–¢–£–ü–ê –ö –î–ê–ù–ù–´–ú ===
    public void Save()
    {
        using var context = new AppDbContext();
        if (Id == 0)
        {
            context.Products.Add(this);
        }
        else
        {
            context.Products.Update(this);
        }
        context.SaveChanges();
    }

    public void Delete()
    {
        using var context = new AppDbContext();
        context.Products.Remove(this);
        context.SaveChanges();
    }

    public static Product? GetById(int id)
    {
        using var context = new AppDbContext();
        return context.Products.FirstOrDefault(p => p.Id == id);
    }
}
```

---

## üß± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```csharp
// –°–æ–∑–¥–∞–Ω–∏–µ
var product = new Product { Name = "–ù–æ—É—Ç–±—É–∫", Price = 45000 };
product.Save(); // —Å–∞–º —Å–µ–±—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
product.Price = 47000;
product.Save(); // —Å–∞–º —Å–µ–±—è –æ–±–Ω–æ–≤–ª—è–µ—Ç

// –£–¥–∞–ª–µ–Ω–∏–µ
product.Delete();

// –ü–æ–∏—Å–∫
var found = Product.GetById(1);
```

---

## ‚öôÔ∏è –û—Ç–ª–∏—á–∏–µ –æ—Ç Repository –∏ UoW

|–ü–∞—Ç—Ç–µ—Ä–Ω|–ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –ë–î|–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å|
|---|---|---|
|**Active Record**|–í —Å–∞–º–æ–π –º–æ–¥–µ–ª–∏|–ü—Ä–æ—Å—Ç—ã–µ CRUD-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è|
|**Repository**|–í –æ—Ç–¥–µ–ª—å–Ω–æ–º –∫–ª–∞—Å—Å–µ|–°—Ä–µ–¥–Ω–∏–µ/–±–æ–ª—å—à–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω—É–∂–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª—å|
|**Unit of Work**|–ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤|–°–ª–æ–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏|

---

## üß† –ê–Ω–∞–ª–æ–≥–∏—è

> Active Record ‚Äî —ç—Ç–æ ‚Äú—Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç‚Äù.  
> –û–Ω –Ω–µ –∂–¥—ë—Ç, –ø–æ–∫–∞ –∫—Ç–æ-—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç –µ–≥–æ –≤ –ë–î ‚Äî –æ–Ω **—Å–∞–º –∑–Ω–∞–µ—Ç**, –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å.

Repository ‚Äî —ç—Ç–æ ‚Äú—Å–µ–∫—Ä–µ—Ç–∞—Ä—å‚Äù: —Ç—ã –µ–º—É –≥–æ–≤–æ—Ä–∏—à—å ‚Äú—Å–æ—Ö—Ä–∞–Ω–∏ —ç—Ç–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞‚Äù,  
–∞ Unit of Work ‚Äî ‚Äú—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å‚Äù, –∫–æ—Ç–æ—Ä—ã–π —Å–ª–µ–¥–∏—Ç, —á—Ç–æ–±—ã –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å –≤–º–µ—Å—Ç–µ.

---

## ‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ Active Record

- –ù–∞—Ä—É—à–∞–µ—Ç **–ø—Ä–∏–Ω—Ü–∏–ø –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (SRP)** ‚Äî –º–æ–¥–µ–ª—å —Ö—Ä–∞–Ω–∏—Ç –∏ –¥–∞–Ω–Ω—ã–µ, –∏ –ª–æ–≥–∏–∫—É –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î.
    
- –ü–ª–æ—Ö–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è **—Å–ª–æ–∂–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏**.
    
- –°–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å (–∂—ë—Å—Ç–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –±–∞–∑—ã).
    

---

## üîç –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

Active Record ‚Äî —ç—Ç–æ **–æ—Å–Ω–æ–≤–∞ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ ORM**, –Ω–∞–ø—Ä–∏–º–µ—Ä:

- **Ruby on Rails** (–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä),
    
- **Dapper.Contrib** –≤ C#,
    
- —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –≤ **EF Core** (—á–µ—Ä–µ–∑ `DbSet<TEntity>`).
    

---

## üí¨ –ö–æ—Ä–æ—Ç–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

> **Active Record** ‚Äî —ç—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –æ–±—ä–µ–∫—Ç –¥–æ–º–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–∞–∫ –¥–∞–Ω–Ω—ã–µ, —Ç–∞–∫ –∏ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–∏–º–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏).

---

–•–æ—á–µ—à—å, —è –ø–æ–∫–∞–∂—É –ø—Ä–∏–º–µ—Ä Active Record –Ω–∞ **Dapper** ‚Äî —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –±–µ–∑ EF –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ ‚Äú—á–∏—Å—Ç–æ‚Äù?

–ü–∞—Ç—Ç–µ—Ä–Ω **Active Record** —á–∞—â–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–±–µ–∑ Entity Framework**,  
–∞ –≤–æ—Ç —Å **Dapper** ‚Äî –æ–Ω –∫–∞–∫ —Ä–∞–∑ –∏–¥–µ–∞–ª—å–Ω–æ —Å–æ—á–µ—Ç–∞–µ—Ç—Å—è üí™