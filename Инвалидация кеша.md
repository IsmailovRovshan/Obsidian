**–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å —É–¥–∞–ª–µ–Ω–∏—è –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –∫—ç—à–µ, —á—Ç–æ–±—ã –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª—É—á–∏–ª–æ **–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö).

–ï—Å–ª–∏ –Ω–µ –¥–µ–ª–∞—Ç—å –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å **—É—Å—Ç–∞—Ä–µ–≤—à–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π**, —á—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –æ—à–∏–±–∫–∞–º –∏–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é.

---

### üîπ –ü—Ä–∏–º–µ—Ä

–î–æ–ø—É—Å—Ç–∏–º, —Ç—ã –∫–µ—à–∏—Ä—É–µ—à—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ `userId`:

```csharp
var user = await _cache.GetAsync<User>($"user_{userId}");
```

–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑–º–µ–Ω–∏–ª –∏–º—è –≤ –±–∞–∑–µ, –Ω–æ –¥–∞–Ω–Ω—ã–µ –≤ –∫—ç—à–µ –æ—Å—Ç–∞–ª–∏—Å—å –ø—Ä–µ–∂–Ω–∏–º–∏ ‚Äî –∫—ç—à —É—Å—Ç–∞—Ä–µ–ª.  
–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –Ω—É–∂–Ω–æ **—É–¥–∞–ª–∏—Ç—å** —Å—Ç–∞—Ä—É—é –∑–∞–ø–∏—Å—å –∏–∑ –∫—ç—à–∞:

```csharp
await _cache.RemoveAsync($"user_{userId}");
```

–∏–ª–∏ **–æ–±–Ω–æ–≤–∏—Ç—å** –µ—ë —Å–≤–µ–∂–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

```csharp
await _cache.SetAsync($"user_{userId}", updatedUser);
```

---

## üî∏ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫—ç—à–∞

1. ### **Time-based (–ø–æ –≤—Ä–µ–º–µ–Ω–∏)**
    
    –°–∞–º—ã–π —á–∞—Å—Ç—ã–π —Å–ø–æ—Å–æ–±.  
    –î–∞–Ω–Ω—ã–µ —Å—á–∏—Ç–∞—é—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ –ø–æ—Å–ª–µ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.
    
    ```csharp
    var options = new MemoryCacheEntryOptions
    {
        AbsoluteExpirationRelativeToNow = TimeSpan.FromMinutes(10)
    };
    _cache.Set("user_1", user, options);
    ```
    
    üëâ –ß–µ—Ä–µ–∑ 10 –º–∏–Ω—É—Ç –∑–∞–ø–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–∞.
    
    –í–∞—Ä–∏–∞–Ω—Ç—ã:
    
    - **Absolute expiration** ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è.
        
    - **Sliding expiration** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏.
        

---

2. ### **Event-based (–ø–æ —Å–æ–±—ã—Ç–∏—é)**
    
    –ö—ç—à –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∏—Å—Ç–æ—á–Ω–∏–∫–µ.  
    –ù–∞–ø—Ä–∏–º–µ—Ä:
    
    - –û–±–Ω–æ–≤–∏–ª–∏ –∑–∞–ø–∏—Å—å –≤ –ë–î ‚Üí —Å–±—Ä–æ—Å–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫—ç—à.
        
    - –£–¥–∞–ª–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí —É–¥–∞–ª–∏—Ç—å `user_{id}` –∏–∑ –∫—ç—à–∞.
        
    
    ```csharp
    public async Task UpdateUser(User user)
    {
        await _db.UpdateAsync(user);
        await _cache.RemoveAsync($"user_{user.Id}");
    }
    ```
    

---

3. ### **Dependency-based (–ø–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)**
    
    –ö—ç—à –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä—É–≥–∏—Ö –¥–∞–Ω–Ω—ã—Ö. –ï—Å–ª–∏ –º–µ–Ω—è–µ—Ç—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å ‚Äî –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –∏ —Ç–µ–∫—É—â–∏–π –∫—ç—à.
    
    –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–ø–∏—Å–æ–∫ —É—Ä–æ–∫–æ–≤ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è:
    
    - –ò–∑–º–µ–Ω–∏–ª–æ—Å—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ ‚Üí —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –∏ –∫—ç—à —Å–ø–∏—Å–∫–∞ —É—Ä–æ–∫–æ–≤.
        
    
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Å–ª–æ–∂–Ω—ã—Ö —Å–≤—è–∑—è—Ö –¥–∞–Ω–Ω—ã—Ö.
    

---

4. ### **Manual (—Ä—É—á–Ω–∞—è)**
    
    –ò–Ω–æ–≥–¥–∞ –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–∞–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –≤—Ä—É—á–Ω—É—é –≤ –Ω—É–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –¥–µ–ø–ª–æ–µ, –º–∞—Å—Å–æ–≤–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–ª–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å.
    

---

5. ### **Version-based (–ø–æ –≤–µ—Ä—Å–∏–∏ –¥–∞–Ω–Ω—ã—Ö)**
    
    –í–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è –∫—ç—à–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**:
    
    - –ö–ª—é—á –∫—ç—à–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä:
        
        ```
        user_v2_{id}
        ```
        
    - –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–æ—Å—Ç–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—à—å –≤–µ—Ä—Å–∏—é, –∏ —Å—Ç–∞—Ä—ã–µ –∫—ç—à–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è ‚Äú–Ω–µ–≤–∏–¥–∏–º—ã–º–∏‚Äù.
        

---

## üîπ –í–∞–∂–Ω–æ

–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ ‚Äî –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ (–ø–æ –∏–∑–≤–µ—Å—Ç–Ω–æ–π —à—É—Ç–∫–µ):

> ¬´–ï—Å—Ç—å —Ç–æ–ª—å–∫–æ –¥–≤–µ —Ç—Ä—É–¥–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö –Ω–∞—É–∫–∞—Ö: –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ –∏ –≤—ã–±–æ—Ä –∏–º—ë–Ω.¬ª

---

–•–æ—á–µ—à—å, —è –ø–æ–∫–∞–∂—É –Ω–µ–±–æ–ª—å—à–æ–π **–ø—Ä–∏–º–µ—Ä —Å–µ—Ä–≤–∏—Å–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è** –≤ C# —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –≤—Ä—É—á–Ω—É—é (–Ω–∞ MemoryCache)?