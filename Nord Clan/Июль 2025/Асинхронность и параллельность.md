**Машина состояний** — это структура, которую компилятор C# автоматически создаёт, когда ты используешь `async` и `await`. Она позволяет приостанавливать выполнение метода и затем возобновлять его с того места, где была приостановка.

### Зачем она нужна

Ключевая особенность асинхронных методов — возможность временно приостановить выполнение (например, на `await Task.Delay(...)`), и потом продолжить с того же места. Но обычные методы в C# не умеют «запоминать место» и «продолжать с середины». Поэтому компилятор преобразует асинхронный метод в **машину состояний** — специальную структуру, которая:

1. Делит метод на этапы.
    
2. Сохраняет текущий этап в переменной `state`.
    
3. Сохраняет локальные переменные между паузами.
    
4. Позволяет методам быть «приостанавливаемыми» и «возобновляемыми».


Гонки данных